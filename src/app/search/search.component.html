<div class="full-width-container">

    <div class="row">

        <div class="w-50">
            <form [formGroup]="form">
                <div class="search-container">
                    <h3 class="mb-4 text-center">Search</h3>

                    <div class="form-group row">

                        <label for="author" class="col-sm-3 col-form-label">Author</label>
                        <div class="col-sm-7">
                            <input class="form-control" id="author" formControlName="author"
                                   (keyup)="getFilteredBooks()">
                        </div>

                    </div>

                    <div class="form-group row">

                        <label for="title" class="col-sm-3 col-form-label">Title</label>
                        <div class="col-sm-7">
                            <input class="form-control" id="title" formControlName="title" (keyup)="getFilteredBooks()">
                        </div>

                    </div>

                    <div class="form-group row">

                        <label for="isbn" class="col-sm-3 col-form-label">ISBN</label>
                        <div class="col-sm-7">
                            <input class="form-control" id="isbn" formControlName="isbn" (keyup)="getFilteredBooks()">
                        </div>

                    </div>
                    <div class="form-group row">
                        <label for="formatId" class="col-sm-3 col-form-label">Format</label>
                        <div class="col-sm-7">
                            <select class="form-control" id="formatId" formControlName="formatId"
                                    (change)="getFilteredBooks()">
                                <option *ngFor="let format of dataService.formats"
                                        [selected]="format.id === +form.controls['formatId'].value"
                                        [ngValue]="format.id">{{ format.name }}
                                </option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group row">

                        <div class="col">
                            <div class="row">

                                <label for="page-min" class="col-sm-6 col-form-label">Pages between</label>
                                <div class="col-sm-6">
                                    <input type="number" class="form-control" id="page-min" formControlName="pageMin"
                                           (keyup)="getFilteredBooks()"
                                           [ngClass]="{ 'is-invalid':  form.controls['pageMin'].value > form.controls['pageMax'].value }">
                                    <div *ngIf="form.controls['pageMin'].value > form.controls['pageMax'].value"
                                         class="d-block invalid-feedback">
                                        <p>Price min > price max</p>
                                    </div>
                                </div>

                            </div>
                        </div>

                        <div class="col">
                            <div class="row">

                                <label class="col-sm-2 col-form-label text-center" for="page-max">and</label>
                                <div class="col-sm-6">
                                    <input type="number" class="form-control" id="page-max" formControlName="pageMax"
                                           (keyup)="getFilteredBooks()"
                                           [ngClass]="{ 'is-invalid':  form.controls['priceMin'].value > form.controls['pageMax'].value }">
                                    <div *ngIf="form.controls['pageMin'].value > form.controls['pageMax'].value"
                                         class="d-block invalid-feedback">
                                        <p>Price min > price max</p>
                                    </div>
                                </div>


                            </div>
                        </div>

                    </div>

                    <div class="form-group row">

                        <div class="col">
                            <div class="row">

                                <label for="price-min" class="col-sm-6 col-form-label">Price between</label>
                                <div class="col-sm-6">
                                    <input type="number" class="form-control" id="price-min" formControlName="priceMin"
                                           (keyup)="getFilteredBooks()"
                                           [ngClass]="{ 'is-invalid':  form.controls['priceMin'].value > form.controls['priceMax'].value }">
                                    <div *ngIf="form.controls['priceMin'].value > form.controls['priceMax'].value"
                                         class="d-block invalid-feedback">
                                        <p>Price min > price max</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col">
                            <div class="row">

                                <label class="col-sm-2 col-form-label text-center" for="price-max">and</label>
                                <div class="col-sm-6">
                                    <input type="number" class="form-control" id="price-max" formControlName="priceMax"
                                           (keyup)="getFilteredBooks()"
                                           [ngClass]="{ 'is-invalid':  form.controls['priceMin'].value > form.controls['priceMax'].value }">
                                    <div *ngIf="form.controls['priceMin'].value > form.controls['priceMax'].value"
                                         class="d-block invalid-feedback">
                                        <p>price min > price max</p>
                                    </div>
                                </div>

                            </div>
                        </div>

                    </div>
                </div>
            </form>
        </div>

        <div class="w-50">
            <h3 class="mb-4 text-center">List of Matched Books</h3>
            <div class="d-flex justify-content-xl-around flex-row flex-wrap">
                <div *ngFor="let book of displayedBooks" (click)="goToDetail(book)"
                     class="books text-white bg-info justify-content-center text-center align-items-center flex-grow-1">
                    <div class="book">
                        <h4>{{book.title}}</h4>
                    </div>
                </div>
            </div>
        </div>
    </div>

</div>
